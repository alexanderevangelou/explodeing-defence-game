def on_b_pressed():
    global projectile, is_shooting
    if is_shooting == True:
        projectile = sprites.create_projectile_from_sprite(img("""
                . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . 2 2 2 2 2 2 2 2 2 2 2 2 . . 
                            . . 3 3 3 3 3 3 3 3 3 3 3 3 . . 
                            . . 1 1 1 1 1 1 1 1 1 1 1 1 . . 
                            . . 1 1 1 1 1 1 1 1 1 1 1 1 . . 
                            . . 3 3 3 3 3 3 3 3 3 3 3 3 . . 
                            . . 2 2 2 2 2 2 2 2 2 2 2 2 . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . . 
                            . . . . . . . . . . . . . . . .
            """),
            mySprite,
            50,
            0)
        projectile.set_kind(SpriteKind.projectile)
        animation.run_image_animation(projectile,
            [img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . 2 2 2 2 2 2 2 2 2 2 2 2 . . 
                                . . 3 3 3 3 3 3 3 3 3 3 3 3 . . 
                                . . 1 1 1 1 1 1 1 1 1 1 1 1 . . 
                                . . 1 1 1 1 1 1 1 1 1 1 1 1 . . 
                                . . 3 3 3 3 3 3 3 3 3 3 3 3 . . 
                                . . 2 2 2 2 2 2 2 2 2 2 2 2 . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . 2 2 2 2 . . . 
                                . . . . . . . 2 2 1 1 1 1 2 . . 
                                . . . . 2 2 3 3 1 1 1 1 1 1 . . 
                                . . 3 3 3 3 1 1 1 1 1 1 1 1 . . 
                                . . 1 1 1 1 1 1 1 1 1 1 1 1 . . 
                                . . 3 3 2 2 3 1 1 1 1 1 1 1 . . 
                                . . . . . . 2 2 3 1 1 1 1 2 . . 
                                . . . . . . . . . 2 2 2 2 . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . 1 1 3 . . . . . . 
                                . . . . . . 1 3 . 3 3 . . . . . 
                                . . . . . . 1 . . . 3 2 2 3 . . 
                                . . . . . 1 3 . . . 2 2 1 3 3 . 
                                . . . . . 1 3 . 2 2 3 1 1 1 3 . 
                                . . 2 2 2 1 3 3 3 3 3 1 1 1 3 . 
                                . . 1 1 1 1 3 1 1 1 1 1 1 1 3 . 
                                . . 2 2 2 1 3 3 3 3 3 1 1 1 3 . 
                                . . . . . 1 3 . 2 2 3 1 1 1 3 . 
                                . . . . . 1 3 . . . 2 2 1 3 3 . 
                                . . . . . . 1 . . . 3 2 2 3 . . 
                                . . . . . . 1 3 . 3 3 . . . . . 
                                . . . . . . . 1 1 3 . . . . . . 
                                . . . . . . . . . . . . . . . .
                """)],
            500,
            True)
        is_shooting = False
        pause(10000)
        is_shooting = True
controller.B.on_event(ControllerButtonEvent.PRESSED, on_b_pressed)

def on_a_pressed():
    global exploading
    if exploading == False:
        mySprite.set_image(img("""
            . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . 4 4 . . . . . . . 
                        . . . . . . 4 5 5 4 . . . . . . 
                        . . . . . . 2 5 5 2 . . . . . . 
                        . . . . . . . 2 2 . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . .
        """))
        animation.run_image_animation(mySprite,
            [img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . 4 4 . . . . . . . 
                                . . . . . . 4 5 5 4 . . . . . . 
                                . . . . . . 2 5 5 2 . . . . . . 
                                . . . . . . . 2 2 . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . 4 . . . . . 
                                . . . . 2 . . . . 4 4 . . . . . 
                                . . . . 2 4 . . 4 5 4 . . . . . 
                                . . . . . 2 4 d 5 5 4 . . . . . 
                                . . . . . 2 5 5 5 5 4 . . . . . 
                                . . . . . . 2 5 5 5 5 4 . . . . 
                                . . . . . . 2 5 4 2 4 4 . . . . 
                                . . . . . . 4 4 . . 2 4 4 . . . 
                                . . . . . 4 4 . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . 4 4 . . . . . . . 
                                . . . . . . 4 5 5 4 . . . . . . 
                                . . . . . . 2 5 5 2 . . . . . . 
                                . . . . . . . 2 2 . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . 2 2 . . . . . . . . . 
                                . . . . . . 4 2 2 . . . 4 . . . 
                                . . . . . . . 4 5 2 2 4 4 . . . 
                                . . . . . . . d 5 5 5 4 . . . . 
                                . . . . . . 4 5 5 5 4 . . . . . 
                                . . . . . 4 5 5 5 5 2 . . . . . 
                                . . . . 4 4 4 4 4 5 4 2 . . . . 
                                . . . . . . . . . 4 4 4 . . . . 
                                . . . . . . . . . . . 4 . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . 4 4 . . . . . . . 
                                . . . . . . 4 5 5 4 . . . . . . 
                                . . . . . . 2 5 5 2 . . . . . . 
                                . . . . . . . 2 2 . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . 4 4 . . . . . . . . . 
                                . . . . . . 4 4 . . 2 4 4 . . . 
                                . . . . . . 2 5 4 2 4 4 . . . . 
                                . . . . . . 2 5 5 5 5 4 . . . . 
                                . . . . . 2 5 5 5 5 4 . . . . . 
                                . . . . . 2 4 d 5 5 4 . . . . . 
                                . . . . 2 4 . . 4 5 4 . . . . . 
                                . . . . 2 . . . . 4 4 . . . . . 
                                . . . . . . . . . . 4 . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . 4 4 . . . . . . . 
                                . . . . . . 4 5 5 4 . . . . . . 
                                . . . . . . 2 5 5 2 . . . . . . 
                                . . . . . . . 2 2 . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """),
                img("""
                    . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . 4 . . . . . . . . . . . 
                                . . . . 4 4 4 . . . . . . . . . 
                                . . . . 2 4 5 4 4 4 4 4 . . . . 
                                . . . . . 2 5 5 5 5 4 . . . . . 
                                . . . . . 4 5 5 5 4 . . . . . . 
                                . . . . 4 5 5 5 d . . . . . . . 
                                . . . 4 4 2 2 5 4 . . . . . . . 
                                . . . 4 . . . 2 2 4 . . . . . . 
                                . . . . . . . . . 2 2 . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . . 
                                . . . . . . . . . . . . . . . .
                """)],
            100,
            True)
        exploading = True
        lantern.set_light_band_width(25)
        scene.camera_follow_sprite(mySprite)
    else:
        expload()
controller.A.on_event(ControllerButtonEvent.PRESSED, on_a_pressed)

def on_overlap_tile(sprite, location):
    info.change_life_by(-1)
    sprite.destroy()
scene.on_overlap_tile(SpriteKind.enemy,
    sprites.builtin.forest_tiles0,
    on_overlap_tile)

def on_on_overlap(sprite2, otherSprite):
    effects.clear_particles(sprite2)
    sprite2.destroy(effects.fire, 100)
    otherSprite.destroy(effects.fire, 100)
sprites.on_overlap(SpriteKind.enemy, SpriteKind.projectile, on_on_overlap)

def expload():
    global mySprite, exploading
    mySprite.set_image(img("""
        . . . . . . . . . . . . . . . . 
                . . . . . . . 2 1 2 . . . . . . 
                . . . . . . . 2 1 2 . . . . . . 
                . . . . . . . 2 1 2 . . . . . . 
                . . . . . . . 3 1 3 . . . . . . 
                . . . . . . 2 3 1 3 2 . . . . . 
                . . . . . . 2 1 1 1 2 . . . . . 
                . . . . . . 2 1 1 1 3 . . . . . 
                . . . . . . 3 1 1 1 3 . . . . . 
                . . . . . . 3 1 1 1 3 . . . . . 
                . . . . . . 3 1 1 1 3 . . . . . 
                . . . . . . 2 3 1 3 2 . . . . . 
                . . . . . . . 2 2 2 . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . .
    """))
    animation.run_image_animation(mySprite,
        [img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . 2 1 2 . . . . . . 
                        . . . . . . . 2 1 2 . . . . . . 
                        . . . . . . . 2 1 2 . . . . . . 
                        . . . . . . . 3 1 3 . . . . . . 
                        . . . . . . 2 3 1 3 2 . . . . . 
                        . . . . . . 2 1 1 1 2 . . . . . 
                        . . . . . . 2 1 1 1 3 . . . . . 
                        . . . . . . 3 1 1 1 3 . . . . . 
                        . . . . . . 3 1 1 1 3 . . . . . 
                        . . . . . . 3 1 1 1 3 . . . . . 
                        . . . . . . 2 3 1 3 2 . . . . . 
                        . . . . . . . 2 2 2 . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . 2 1 2 . . . . . . 
                        . . . . . . . 2 1 2 . . . . . . 
                        . . . . . . . 2 1 2 . . . . . . 
                        . . . . . . . 3 1 3 . . . . . . 
                        . . . . . . 2 3 1 3 2 . . . . . 
                        . . . . . . 2 1 1 1 2 . . . . . 
                        . . . . . . 2 1 1 1 3 . . . . . 
                        . . . . . . 3 1 1 1 3 . . . . . 
                        . . . . . . 3 1 1 1 3 . . . . . 
                        . . . . . . 3 1 1 1 3 . . . . . 
                        . . . . . . 2 3 1 3 2 . . . . . 
                        . . . . . . . 2 2 2 . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . 2 3 3 3 3 3 2 . . . . 
                        . . . . 3 1 1 1 1 1 1 1 3 . . . 
                        . . . . 1 1 1 1 1 1 1 1 1 . . . 
                        . . . 2 1 1 1 1 1 1 1 1 1 2 . . 
                        . . . 2 3 1 1 1 1 1 1 3 3 2 . . 
                        . . . . . . 2 2 2 2 2 . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . 2 3 3 3 3 3 2 . . . . 
                        . . . . 3 1 1 1 1 1 1 1 3 . . . 
                        . . . . 1 1 1 1 1 1 1 1 1 . . . 
                        . . . 2 1 1 1 1 1 1 1 1 1 2 . . 
                        . . . 2 3 1 1 1 1 1 1 3 3 2 . . 
                        . . . . . . 2 2 2 2 2 . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . 4 4 4 4 4 . . . . . . 
                        . . . 4 4 4 5 5 5 d 4 4 4 4 . . 
                        . . 4 d 5 d 5 5 5 d d d 4 4 . . 
                        . . 4 5 5 1 1 1 d d 5 5 5 4 . . 
                        . 4 5 5 5 1 1 1 5 1 1 5 5 4 4 . 
                        . 4 d d 1 1 5 5 5 1 1 5 5 d 4 . 
                        . 4 5 5 1 1 5 1 1 5 5 d d d 4 . 
                        . 2 5 5 5 d 1 1 1 5 1 1 5 5 2 . 
                        . 2 d 5 5 d 1 1 1 5 1 1 5 5 2 . 
                        . . 2 4 d d 5 5 5 5 d d 5 4 . . 
                        . . . 2 2 4 d 5 5 d d 4 4 . . . 
                        . . 2 2 2 2 2 4 4 4 2 2 2 . . . 
                        . . . 2 2 4 4 4 4 4 4 2 2 . . . 
                        . . . . . 2 2 2 2 2 2 . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . 4 4 4 4 4 . . . . . . 
                        . . . 4 4 4 5 5 5 d 4 4 4 4 . . 
                        . . 4 d 5 d 5 5 5 d d d 4 4 . . 
                        . . 4 5 5 1 1 1 d d 5 5 5 4 . . 
                        . 4 5 5 5 1 1 1 5 1 1 5 5 4 4 . 
                        . 4 d d 1 1 5 5 5 1 1 5 5 d 4 . 
                        . 4 5 5 1 1 5 1 1 5 5 d d d 4 . 
                        . 2 5 5 5 d 1 1 1 5 1 1 5 5 2 . 
                        . 2 d 5 5 d 1 1 1 5 1 1 5 5 2 . 
                        . . 2 4 d d 5 5 5 5 d d 5 4 . . 
                        . . . 2 2 4 d 5 5 d d 4 4 . . . 
                        . . 2 2 2 2 2 4 4 4 2 2 2 . . . 
                        . . . 2 2 4 4 4 4 4 4 2 2 . . . 
                        . . . . . 2 2 2 2 2 2 . . . . .
            """),
            img("""
                . . . . 2 2 2 2 2 2 2 2 . . . . 
                        . . . 2 4 4 4 5 5 4 4 4 2 2 2 . 
                        . 2 2 5 5 d 4 5 5 5 4 4 4 4 2 . 
                        . 2 4 5 5 5 5 d 5 5 5 4 5 4 2 2 
                        . 2 4 d d 5 5 5 5 5 5 d 4 4 4 2 
                        2 4 5 5 d 5 5 5 d d d 5 5 5 4 4 
                        2 4 5 5 4 4 4 d 5 5 d 5 5 5 4 4 
                        4 4 4 4 . . 2 4 5 5 . . 4 4 4 4 
                        . . b b b b 2 4 4 2 b b b b . . 
                        . b d d d d 2 4 4 2 d d d d b . 
                        b d d b b b 2 4 4 2 b b b d d b 
                        b d d b b b b b b b b b b d d b 
                        b b d 1 1 3 1 1 d 1 d 1 1 d b b 
                        . . b b d d 1 1 3 d d 1 b b . . 
                        . . 2 2 4 4 4 4 4 4 4 4 2 2 . . 
                        . . . 2 2 4 4 4 4 4 2 2 2 . . .
            """),
            img("""
                . . . . 2 2 2 2 2 2 2 2 . . . . 
                        . . . 2 4 4 4 5 5 4 4 4 2 2 2 . 
                        . 2 2 5 5 d 4 5 5 5 4 4 4 4 2 . 
                        . 2 4 5 5 5 5 d 5 5 5 4 5 4 2 2 
                        . 2 4 d d 5 5 5 5 5 5 d 4 4 4 2 
                        2 4 5 5 d 5 5 5 d d d 5 5 5 4 4 
                        2 4 5 5 4 4 4 d 5 5 d 5 5 5 4 4 
                        4 4 4 4 . . 2 4 5 5 . . 4 4 4 4 
                        . . b b b b 2 4 4 2 b b b b . . 
                        . b d d d d 2 4 4 2 d d d d b . 
                        b d d b b b 2 4 4 2 b b b d d b 
                        b d d b b b b b b b b b b d d b 
                        b b d 1 1 3 1 1 d 1 d 1 1 d b b 
                        . . b b d d 1 1 3 d d 1 b b . . 
                        . . 2 2 4 4 4 4 4 4 4 4 2 2 . . 
                        . . . 2 2 4 4 4 4 4 2 2 2 . . .
            """),
            img("""
                . . . . . . . . b b . . . . . . 
                        . . . . . . . . b b . . . . . . 
                        . . . b b b . . . . . . . . . . 
                        . . b d d b . . . . . . . b b . 
                        . b d d d b . . . . . . b d d b 
                        . b d d b . . . . b b . b d d b 
                        . b b b . . . . . b b . . b b . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . b b b d d d d d d b b b . . 
                        . b d c c c b b b b c c d d b . 
                        b d d c b . . . . . b c c d d b 
                        c d d b b . . . . . . b c d d c 
                        c b d d d b b . . . . b d d c c 
                        . c c b d d d d b . c c c c c c 
                        . . . c c c c c c . . . . . . .
            """),
            img("""
                . . . . . . . . b b . . . . . . 
                        . . . . . . . . b b . . . . . . 
                        . . . b b b . . . . . . . . . . 
                        . . b d d b . . . . . . . b b . 
                        . b d d d b . . . . . . b d d b 
                        . b d d b . . . . b b . b d d b 
                        . b b b . . . . . b b . . b b . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . b b b d d d d d d b b b . . 
                        . b d c c c b b b b c c d d b . 
                        b d d c b . . . . . b c c d d b 
                        c d d b b . . . . . . b c d d c 
                        c b d d d b b . . . . b d d c c 
                        . c c b d d d d b . c c c c c c 
                        . . . c c c c c c . . . . . . .
            """)],
        100,
        False)
    mySprite.set_image(img("""
        . . . . . . . . b b . . . . . . 
                . . . . . . . . b b . . . . . . 
                . . . b b b . . . . . . . . . . 
                . . b d d b . . . . . . . b b . 
                . b d d d b . . . . . . b d d b 
                . b d d b . . . . b b . b d d b 
                . b b b . . . . . b b . . b b . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . b b b d d d d d d b b b . . 
                . b d c c c b b b b c c d d b . 
                b d d c b . . . . . b c c d d b 
                c d d b b . . . . . . b c d d c 
                c b d d d b b . . . . b d d c c 
                . c c b d d d d b . c c c c c c 
                . . . c c c c c c . . . . . . .
    """))
    lantern.set_light_band_width(7)
    controller.move_sprite(mySprite, 0, 0)
    pause(2000)
    mySprite = sprites.create(img("""
            . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . b . . . . . . . 
                    . . . . . . . b d b . . . . . . 
                    . . . . . . . c d c . . . . . . 
                    . . . . . . . c 5 c . . . . . . 
                    . . . . . . c d 5 d c . . . . . 
                    . . . b c c d 5 5 5 d c c b . . 
                    . . b d d 5 5 5 5 5 5 5 d d b . 
                    . . . b c c d 5 5 5 d c c b . . 
                    . . . . . . c d 5 d c . . . . . 
                    . . . . . . . c 5 c . . . . . . 
                    . . . . . . . c d c . . . . . . 
                    . . . . . . . b d b . . . . . . 
                    . . . . . . . . b . . . . . . . 
                    . . . . . . . . . . . . . . . .
        """),
        SpriteKind.player)
    animation.run_image_animation(mySprite,
        [img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . . b . . . . . . . 
                        . . . . . . . b d b . . . . . . 
                        . . . . . . . c d c . . . . . . 
                        . . . . . . . c 5 c . . . . . . 
                        . . . . . . c d 5 d c . . . . . 
                        . . . b c c d 5 5 5 d c c b . . 
                        . . b d d 5 5 5 5 5 5 5 d d b . 
                        . . . b c c d 5 5 5 d c c b . . 
                        . . . . . . c d 5 d c . . . . . 
                        . . . . . . . c 5 c . . . . . . 
                        . . . . . . . c d c . . . . . . 
                        . . . . . . . b d b . . . . . . 
                        . . . . . . . . b . . . . . . . 
                        . . . . . . . . . . . . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . b d b . . . . . . 
                        . . . . . . . b d b c . . . . . 
                        . . . . b b c 5 5 5 c b b . . . 
                        . . . . b 5 5 5 1 5 5 5 b . . . 
                        . . . c c 5 5 5 1 5 5 5 c c . . 
                        . . b b 5 5 5 1 1 1 5 5 5 b b . 
                        . . d d 5 1 1 1 1 1 1 1 5 d d . 
                        . . b b 5 5 5 1 1 1 5 5 5 b b . 
                        . . . c c 5 5 5 1 5 5 5 c c . . 
                        . . . . b 5 5 5 1 5 5 5 b . . . 
                        . . . . b b c 5 5 5 c b b . . . 
                        . . . . . . c b d b c . . . . . 
                        . . . . . . . b d b . . . . . . 
                        . . . . . . . . . . . . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . 1 . . . . . . . . . . 
                        . . 1 1 . . . 1 1 1 . . . . . . 
                        . . 1 1 . 1 1 1 1 1 1 1 . . . . 
                        . . . . 1 1 1 1 1 1 1 1 1 . . . 
                        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                        . . 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
                        . . 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
                        . . 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
                        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                        . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                        . . . . 1 1 1 1 1 1 1 1 1 . . . 
                        . . 1 . . 1 1 1 1 1 1 1 . . . . 
                        . . . . . . . 1 1 1 . . . . 1 . 
                        . . . . . . . . . . . . . . . .
            """),
            img("""
                . . . . . . . . . . . . . . . . 
                        . . . . . . . . . . . . . . . . 
                        . . . . . . . b d b . . . . . . 
                        . . . . . . . b d b c . . . . . 
                        . . . . b b c 5 5 5 c b b . . . 
                        . . . . b 5 5 5 1 5 5 5 b . . . 
                        . . . c c 5 5 5 1 5 5 5 c c . . 
                        . . b b 5 5 5 1 1 1 5 5 5 b b . 
                        . . d d 5 1 1 1 1 1 1 1 5 d d . 
                        . . b b 5 5 5 1 1 1 5 5 5 b b . 
                        . . . c c 5 5 5 1 5 5 5 c c . . 
                        . . . . b 5 5 5 1 5 5 5 b . . . 
                        . . . . b b c 5 5 5 c b b . . . 
                        . . . . . . c b d b c . . . . . 
                        . . . . . . . b d b . . . . . . 
                        . . . . . . . . . . . . . . . .
            """)],
        100,
        True)
    controller.move_sprite(mySprite)
    lantern.start_lantern_effect(mySprite)
    lantern.set_light_band_width(10)
    scene.camera_follow_sprite(mySprite)
    exploading = False

def on_on_overlap2(sprite3, otherSprite2):
    if controller.A.is_pressed() and exploading == True:
        effects.clear_particles(otherSprite2)
        otherSprite2.destroy(effects.fire, 100)
        info.change_score_by(1)
sprites.on_overlap(SpriteKind.player, SpriteKind.enemy, on_on_overlap2)

enemies: Sprite = None
projectile: Sprite = None
mySprite: Sprite = None
exploading = False
is_shooting = False
tiles.set_current_tilemap(tilemap("""
    level1
"""))
game.set_dialog_frame(img("""
    ..................................................................
        ....33.......33...........dddd............dddd............aaa.....
        ...a533.....393....ddddddd1111d....ddddddd1111d....3333...a35a....
        ...a553aaa339993.dd1111dd111111dddd1111dd111111dd.39393aaa3553aa..
        ..a355555a3999993d11911111111111dd11911111111111d339993a555555553.
        .a555555333399933119991111111111111999111111111113999993a55555533.
        .a355555333393931111911111115511111191111111551111399933a3555533..
        .aa355555a1333311111111111115511111111111111551111339331a55555a...
        ...a55355a1111111111111111111111111111111111111111133311a55335a...
        ...a5aaaaa1111191111111111111111111111111111111111111111aaa33aa...
        ...aa3311115511111111111111111111111111111111111119111111113333...
        ..3339331115511111111111111111111111111111111111111111551133393...
        ..39999331111111111111111111111111111111111111111111115511399993..
        ..339999311111111111111111111111111111111111111111111111113399993.
        ..399993311111111111111111111111111111111111111111111111113999933.
        ...339331191111111111111111111111111111111111111111111119113393...
        ....3311111111111111111111111111111111111111111111111111111133....
        ...dd11111111111111111111111111111111111111111111111111111111dd...
        ...d1111111111111111111111111111111111111111111111111111111111d...
        ..d111111111111111111111111111111111111111111111111111111111911d..
        .d1111551111111111111111111111111111111111111111111111111119991d..
        .d1111551111111111111111111111111111111111111111111111111111911d..
        .d1111111111111111111111111111111111111111111111111111111111111d..
        .d111111111111111111111111111111111111111111111111111111111111dd..
        ..d11111111111111111111111111111111111111111111111111111111111dd..
        ..dd11111111111111111111111111111111111111111111111111111111111d..
        ..dd111111111111111111111111111111111111111111111111111111111111d.
        ..d1111111111111111111111111111111111111111111111111111111111111d.
        ..d1191111111111111111111111111111111111111111111111111111551111d.
        ..d1999111111111111111111111111111111111111111111111111111551111d.
        ..d119111111111111111111111111111111111111111111111111111111111d..
        ...d1111111111111111111111111111111111111111111111111111111111d...
        ...dd11111111111111111111111111111111111111111111111111111111dd...
        ...dd11111111111111111111111111111111111111111111111111111111dd...
        ...d1111111111111111111111111111111111111111111111111111111111d...
        ..d111111111111111111111111111111111111111111111111111111111911d..
        .d1111551111111111111111111111111111111111111111111111111119991d..
        .d1111551111111111111111111111111111111111111111111111111111911d..
        .d1111111111111111111111111111111111111111111111111111111111111d..
        .d111111111111111111111111111111111111111111111111111111111111dd..
        ..d11111111111111111111111111111111111111111111111111111111111dd..
        ..dd11111111111111111111111111111111111111111111111111111111111d..
        ..dd111111111111111111111111111111111111111111111111111111111111d.
        ..d1111111111111111111111111111111111111111111111111111111111111d.
        ..d1191111111111111111111111111111111111111111111111111111551111d.
        ..d1999111111111111111111111111111111111111111111111111111551111d.
        ..d119111111111111111111111111111111111111111111111111111111111d..
        ...d1111111111111111111111111111111111111111111111111111111111d...
        ...dd11111111111111111111111111111111111111111111111111111111dd...
        ....3311111111111111111111111111111111111111111111111111111133....
        ...393311911111111111111111111111111111111111111111111191133933...
        .339999311111111111111111111111111111111111111111111111113399993..
        .399993311111111111111111111111111111111111111111111111113999933..
        ..39999311551111111111111111111111111111111111111111111113399993..
        ...3933311551111111111111111111111111111111111111111155111339333..
        ...3333111111119111111111111111111111111111111111111155111133aa...
        ...aa33aaa1111111111111111111111111111111111111111911111aaaaa5a...
        ...a53355a1133311111111111111111111111111111111111111111a55355a...
        ...a55555a1339331111551111111111111155111111111111133331a555553aa.
        ..3355553a339993111155111111191111115511111119111139393333555553a.
        .33555555a399999311111111111999111111111111199911339993333555555a.
        .355555555a399933d11111111111911dd11111111111911d3999993a555553a..
        ..aa3553aaa39393.dd111111dd1111dddd111111dd1111dd.399933aaa355a...
        ....a53a...3333....d1111ddddddd....d1111ddddddd....393.....335a...
        .....aaa............dddd............dddd...........33.......33....
        ..................................................................
"""))
game.set_dialog_cursor(img("""
    ..........666666666666..........
        ........6667777777777666........
        ......66677777777777777666......
        .....6677777779999777777766.....
        ....667777779966669977777766....
        ....677777799668866117777776....
        ...66777779966877861197777766...
        ...66777799668677686699777766...
        ...88777796688888888669777788...
        ...88777788888888888888777788...
        ...88977888679999997688877988...
        ...88977886777777777768877988...
        ...88997777777777777777779988...
        ...88799777777777777777711788...
        ...88679997777777777779117688...
        ..cc866679999999999999976668cc..
        .ccbc6666679999999999766666cbcc.
        .fcbcc66666666666666666666ccbcf.
        .fcbbcc666666666666666666ccbdcf.
        .f8bbbccc66666666666666cccbddcf.
        .f8cbbbbccccccccccccccccbdddbcf.
        .f8ccbbbbbccccccccccccb111ddccf.
        .f6ccccbbbddddddddddddd111dcccf.
        .f6ccccccbbddddddddddddddbbcccf.
        .f6cccccccccccccbbbbbbbbbdbcccf.
        ..f6cccccccccbbbbbbbbbbbddbccf..
        ..f6cccccccccbbbbbbbbbbbddbccf..
        ..ff6ccccccccbbbbbbbbbbbddbcff..
        ...ff6cccccccbbbbbbbbbbbddbff...
        ....ffcccccccbbbbbbbbbbbdbff....
        ......ffccccbbbbbbbbbbbbff......
        ........ffffffffffffffff........
"""))
game.set_dialog_text_color(9)
game.show_long_text("Hello. You need to defend your trees from green snakes. To do so press A to explode and create a new self to explode also press B to make lasers but it takes 10 seconds to recharge every time you shoot. Also you can't see everything so before exploding you see nearly the whole map until you choose where to explode. That's it all for now. Make sure you remember!!! ",
    DialogLayout.FULL)
info.set_life(5)
info.set_score(0)
is_shooting = True
exploading = False
mySprite = sprites.create(img("""
        . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . b . . . . . . . 
            . . . . . . . b d b . . . . . . 
            . . . . . . . c d c . . . . . . 
            . . . . . . . c 5 c . . . . . . 
            . . . . . . c d 5 d c . . . . . 
            . . . b c c d 5 5 5 d c c b . . 
            . . b d d 5 5 5 5 5 5 5 d d b . 
            . . . b c c d 5 5 5 d c c b . . 
            . . . . . . c d 5 d c . . . . . 
            . . . . . . . c 5 c . . . . . . 
            . . . . . . . c d c . . . . . . 
            . . . . . . . b d b . . . . . . 
            . . . . . . . . b . . . . . . . 
            . . . . . . . . . . . . . . . .
    """),
    SpriteKind.player)
animation.run_image_animation(mySprite,
    [img("""
            . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . b . . . . . . . 
                . . . . . . . b d b . . . . . . 
                . . . . . . . c d c . . . . . . 
                . . . . . . . c 5 c . . . . . . 
                . . . . . . c d 5 d c . . . . . 
                . . . b c c d 5 5 5 d c c b . . 
                . . b d d 5 5 5 5 5 5 5 d d b . 
                . . . b c c d 5 5 5 d c c b . . 
                . . . . . . c d 5 d c . . . . . 
                . . . . . . . c 5 c . . . . . . 
                . . . . . . . c d c . . . . . . 
                . . . . . . . b d b . . . . . . 
                . . . . . . . . b . . . . . . . 
                . . . . . . . . . . . . . . . .
        """),
        img("""
            . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . b d b . . . . . . 
                . . . . . . . b d b c . . . . . 
                . . . . b b c 5 5 5 c b b . . . 
                . . . . b 5 5 5 1 5 5 5 b . . . 
                . . . c c 5 5 5 1 5 5 5 c c . . 
                . . b b 5 5 5 1 1 1 5 5 5 b b . 
                . . d d 5 1 1 1 1 1 1 1 5 d d . 
                . . b b 5 5 5 1 1 1 5 5 5 b b . 
                . . . c c 5 5 5 1 5 5 5 c c . . 
                . . . . b 5 5 5 1 5 5 5 b . . . 
                . . . . b b c 5 5 5 c b b . . . 
                . . . . . . c b d b c . . . . . 
                . . . . . . . b d b . . . . . . 
                . . . . . . . . . . . . . . . .
        """),
        img("""
            . . . . . . . . . . . . . . . . 
                . . . . . 1 . . . . . . . . . . 
                . . 1 1 . . . 1 1 1 . . . . . . 
                . . 1 1 . 1 1 1 1 1 1 1 . . . . 
                . . . . 1 1 1 1 1 1 1 1 1 . . . 
                . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                . . 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
                . . 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
                . . 1 1 1 1 1 1 1 1 1 1 1 1 1 . 
                . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                . . . 1 1 1 1 1 1 1 1 1 1 1 . . 
                . . . . 1 1 1 1 1 1 1 1 1 . . . 
                . . 1 . . 1 1 1 1 1 1 1 . . . . 
                . . . . . . . 1 1 1 . . . . 1 . 
                . . . . . . . . . . . . . . . .
        """),
        img("""
            . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . b d b . . . . . . 
                . . . . . . . b d b c . . . . . 
                . . . . b b c 5 5 5 c b b . . . 
                . . . . b 5 5 5 1 5 5 5 b . . . 
                . . . c c 5 5 5 1 5 5 5 c c . . 
                . . b b 5 5 5 1 1 1 5 5 5 b b . 
                . . d d 5 1 1 1 1 1 1 1 5 d d . 
                . . b b 5 5 5 1 1 1 5 5 5 b b . 
                . . . c c 5 5 5 1 5 5 5 c c . . 
                . . . . b 5 5 5 1 5 5 5 b . . . 
                . . . . b b c 5 5 5 c b b . . . 
                . . . . . . c b d b c . . . . . 
                . . . . . . . b d b . . . . . . 
                . . . . . . . . . . . . . . . .
        """)],
    100,
    True)
controller.move_sprite(mySprite)
lantern.start_lantern_effect(mySprite)
lantern.set_light_band_width(10)
lantern.set_breathing_enabled(True)
scene.camera_follow_sprite(mySprite)

def on_update_interval():
    global enemies
    enemies = sprites.create_projectile_from_side(img("""
            . . . . c c c c c c . . . . . . 
                    . . . c 6 7 7 7 7 6 c . . . . . 
                    . . c 7 7 7 7 7 7 7 7 c . . . . 
                    . c 6 7 7 7 7 7 7 7 7 6 c . . . 
                    . c 7 c 6 6 6 6 c 7 7 7 c . . . 
                    . f 7 6 f 6 6 f 6 7 7 7 f . . . 
                    . f 7 7 7 7 7 7 7 7 7 7 f . . . 
                    . . f 7 7 7 7 6 c 7 7 6 f c . . 
                    . . . f c c c c 7 7 6 f 7 7 c . 
                    . . c 7 2 7 7 7 6 c f 7 7 7 7 c 
                    . c 7 7 2 7 7 c f c 6 7 7 6 c c 
                    c 1 1 1 1 7 6 f c c 6 6 6 c . . 
                    f 1 1 1 1 1 6 6 c 6 6 6 6 f . . 
                    f 6 1 1 1 1 1 6 6 6 6 6 c f . . 
                    . f 6 1 1 1 1 1 1 6 6 6 f . . . 
                    . . c c c c c c c c c f . . . .
        """),
        -50,
        0)
    enemies.start_effect(effects.trail)
    enemies.set_position(scene.screen_width(), randint(scene.screen_height(), 0))
    enemies.set_kind(SpriteKind.enemy)
    animation.run_image_animation(enemies,
        [img("""
                . . . . c c c c c c . . . . . . 
                        . . . c 6 7 7 7 7 6 c . . . . . 
                        . . c 7 7 7 7 7 7 7 7 c . . . . 
                        . c 6 7 7 7 7 7 7 7 7 6 c . . . 
                        . c 7 c 6 6 6 6 c 7 7 7 c . . . 
                        . f 7 6 f 6 6 f 6 7 7 7 f . . . 
                        . f 7 7 7 7 7 7 7 7 7 7 f . . . 
                        . . f 7 7 7 7 6 c 7 7 6 f c . . 
                        . . . f c c c c 7 7 6 f 7 7 c . 
                        . . c 7 2 7 7 7 6 c f 7 7 7 7 c 
                        . c 7 7 2 7 7 c f c 6 7 7 6 c c 
                        c 1 1 1 1 7 6 f c c 6 6 6 c . . 
                        f 1 1 1 1 1 6 6 c 6 6 6 6 f . . 
                        f 6 1 1 1 1 1 6 6 6 6 6 c f . . 
                        . f 6 1 1 1 1 1 1 6 6 6 f . . . 
                        . . c c c c c c c c c f . . . .
            """),
            img("""
                . . . c c c c c c . . . . . . . 
                        . . c 6 7 7 7 7 6 c . . . . . . 
                        . c 7 7 7 7 7 7 7 7 c . . . . . 
                        c 6 7 7 7 7 7 7 7 7 6 c . . . . 
                        c 7 c 6 6 6 6 c 7 7 7 c . . . . 
                        f 7 6 f 6 6 f 6 7 7 7 f . . . . 
                        f 7 7 7 7 7 7 7 7 7 7 f . . . . 
                        . f 7 7 7 7 6 c 7 7 6 f . . . . 
                        . . f c c c c 7 7 6 f c c c . . 
                        . . c 6 2 7 7 7 f c c 7 7 7 c . 
                        . c 6 7 7 2 7 7 c f 6 7 7 7 7 c 
                        . c 1 1 1 1 7 6 6 c 6 6 6 c c c 
                        . c 1 1 1 1 1 6 6 6 6 6 6 c . . 
                        . c 6 1 1 1 1 1 6 6 6 6 6 c . . 
                        . . c 6 1 1 1 1 1 7 6 6 c c . . 
                        . . . c c c c c c c c c c . . .
            """)],
        100,
        True)
game.on_update_interval(5000, on_update_interval)

def on_forever():
    if info.score() == 20:
        game.show_long_text("You got all 20 snakes!!!", DialogLayout.CENTER)
        game.over(True)
forever(on_forever)
